// Generated by SpatialOS codegen. DO NOT EDIT!
// source: ExhaustiveMapKey in improbable/gdk/tests/exhaustive_test.schema.

namespace Improbable.Gdk.Tests
{

public static class ExhaustiveMapKey_Extensions
{
  public static ExhaustiveMapKey.Data Get(this global::Improbable.Worker.IComponentData<ExhaustiveMapKey> data)
  {
    return (ExhaustiveMapKey.Data) data;
  }

  public static ExhaustiveMapKey.Update Get(this global::Improbable.Worker.IComponentUpdate<ExhaustiveMapKey> update)
  {
    return (ExhaustiveMapKey.Update) update;
  }
}

public partial class ExhaustiveMapKey : global::Improbable.Worker.IComponentMetaclass
{
  public const uint ComponentId = 197719;

  uint global::Improbable.Worker.IComponentMetaclass.ComponentId
  {
    get { return ComponentId; }
  }

  /// <summary>
  /// Concrete data type for the ExhaustiveMapKey component.
  /// </summary>
  public class Data : global::Improbable.Worker.IComponentData<ExhaustiveMapKey>, global::Improbable.Collections.IDeepCopyable<Data>
  {
    public global::Improbable.Gdk.Tests.ExhaustiveMapKeyData Value;

    public Data(global::Improbable.Gdk.Tests.ExhaustiveMapKeyData value)
    {
      Value = value;
    }

    public Data(
        global::Improbable.Collections.Map<float, string> field2,
        global::Improbable.Collections.Map<int, string> field4,
        global::Improbable.Collections.Map<long, string> field5,
        global::Improbable.Collections.Map<double, string> field6,
        global::Improbable.Collections.Map<string, string> field7,
        global::Improbable.Collections.Map<uint, string> field8,
        global::Improbable.Collections.Map<ulong, string> field9,
        global::Improbable.Collections.Map<int, string> field10,
        global::Improbable.Collections.Map<long, string> field11,
        global::Improbable.Collections.Map<uint, string> field12,
        global::Improbable.Collections.Map<ulong, string> field13,
        global::Improbable.Collections.Map<int, string> field14,
        global::Improbable.Collections.Map<long, string> field15,
        global::Improbable.Collections.Map<global::Improbable.EntityId, string> field16,
        global::Improbable.Collections.Map<global::Improbable.Gdk.Tests.SomeType, string> field17)
    {
      Value = new global::Improbable.Gdk.Tests.ExhaustiveMapKeyData(
          field2,
          field4,
          field5,
          field6,
          field7,
          field8,
          field9,
          field10,
          field11,
          field12,
          field13,
          field14,
          field15,
          field16,
          field17);
    }

    public Data DeepCopy()
    {
      return new Data(Value.DeepCopy());
    }

    public global::Improbable.Worker.IComponentUpdate<ExhaustiveMapKey> ToUpdate()
    {
      var update = new Update();
      update.SetField2(Value.field2);
      update.SetField4(Value.field4);
      update.SetField5(Value.field5);
      update.SetField6(Value.field6);
      update.SetField7(Value.field7);
      update.SetField8(Value.field8);
      update.SetField9(Value.field9);
      update.SetField10(Value.field10);
      update.SetField11(Value.field11);
      update.SetField12(Value.field12);
      update.SetField13(Value.field13);
      update.SetField14(Value.field14);
      update.SetField15(Value.field15);
      update.SetField16(Value.field16);
      update.SetField17(Value.field17);
      return update;
    }
  }

  /// <summary>
  /// Concrete update type for the ExhaustiveMapKey component.
  /// </summary>
  public class Update : global::Improbable.Worker.IComponentUpdate<ExhaustiveMapKey>, global::Improbable.Collections.IDeepCopyable<Update>
  {
    /// <summary>
    /// Field field2 = 2.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<float, string>> field2;
    public Update SetField2(global::Improbable.Collections.Map<float, string> _value)
    {
      field2.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field4 = 4.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<int, string>> field4;
    public Update SetField4(global::Improbable.Collections.Map<int, string> _value)
    {
      field4.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field5 = 5.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<long, string>> field5;
    public Update SetField5(global::Improbable.Collections.Map<long, string> _value)
    {
      field5.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field6 = 6.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<double, string>> field6;
    public Update SetField6(global::Improbable.Collections.Map<double, string> _value)
    {
      field6.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field7 = 7.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<string, string>> field7;
    public Update SetField7(global::Improbable.Collections.Map<string, string> _value)
    {
      field7.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field8 = 8.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<uint, string>> field8;
    public Update SetField8(global::Improbable.Collections.Map<uint, string> _value)
    {
      field8.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field9 = 9.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<ulong, string>> field9;
    public Update SetField9(global::Improbable.Collections.Map<ulong, string> _value)
    {
      field9.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field10 = 10.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<int, string>> field10;
    public Update SetField10(global::Improbable.Collections.Map<int, string> _value)
    {
      field10.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field11 = 11.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<long, string>> field11;
    public Update SetField11(global::Improbable.Collections.Map<long, string> _value)
    {
      field11.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field12 = 12.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<uint, string>> field12;
    public Update SetField12(global::Improbable.Collections.Map<uint, string> _value)
    {
      field12.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field13 = 13.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<ulong, string>> field13;
    public Update SetField13(global::Improbable.Collections.Map<ulong, string> _value)
    {
      field13.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field14 = 14.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<int, string>> field14;
    public Update SetField14(global::Improbable.Collections.Map<int, string> _value)
    {
      field14.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field15 = 15.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<long, string>> field15;
    public Update SetField15(global::Improbable.Collections.Map<long, string> _value)
    {
      field15.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field16 = 16.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<global::Improbable.EntityId, string>> field16;
    public Update SetField16(global::Improbable.Collections.Map<global::Improbable.EntityId, string> _value)
    {
      field16.Set(_value);
      return this;
    }

    /// <summary>
    /// Field field17 = 17.
    /// </summary>
    public global::Improbable.Collections.Option<global::Improbable.Collections.Map<global::Improbable.Gdk.Tests.SomeType, string>> field17;
    public Update SetField17(global::Improbable.Collections.Map<global::Improbable.Gdk.Tests.SomeType, string> _value)
    {
      field17.Set(_value);
      return this;
    }

    public Update DeepCopy()
    {
      var _result = new Update();
      if (field2.HasValue)
      {
        global::Improbable.Collections.Map<float, string> field;
        field = field2.Value.DeepCopy();
        _result.field2.Set(field);
      }
      if (field4.HasValue)
      {
        global::Improbable.Collections.Map<int, string> field;
        field = field4.Value.DeepCopy();
        _result.field4.Set(field);
      }
      if (field5.HasValue)
      {
        global::Improbable.Collections.Map<long, string> field;
        field = field5.Value.DeepCopy();
        _result.field5.Set(field);
      }
      if (field6.HasValue)
      {
        global::Improbable.Collections.Map<double, string> field;
        field = field6.Value.DeepCopy();
        _result.field6.Set(field);
      }
      if (field7.HasValue)
      {
        global::Improbable.Collections.Map<string, string> field;
        field = field7.Value.DeepCopy();
        _result.field7.Set(field);
      }
      if (field8.HasValue)
      {
        global::Improbable.Collections.Map<uint, string> field;
        field = field8.Value.DeepCopy();
        _result.field8.Set(field);
      }
      if (field9.HasValue)
      {
        global::Improbable.Collections.Map<ulong, string> field;
        field = field9.Value.DeepCopy();
        _result.field9.Set(field);
      }
      if (field10.HasValue)
      {
        global::Improbable.Collections.Map<int, string> field;
        field = field10.Value.DeepCopy();
        _result.field10.Set(field);
      }
      if (field11.HasValue)
      {
        global::Improbable.Collections.Map<long, string> field;
        field = field11.Value.DeepCopy();
        _result.field11.Set(field);
      }
      if (field12.HasValue)
      {
        global::Improbable.Collections.Map<uint, string> field;
        field = field12.Value.DeepCopy();
        _result.field12.Set(field);
      }
      if (field13.HasValue)
      {
        global::Improbable.Collections.Map<ulong, string> field;
        field = field13.Value.DeepCopy();
        _result.field13.Set(field);
      }
      if (field14.HasValue)
      {
        global::Improbable.Collections.Map<int, string> field;
        field = field14.Value.DeepCopy();
        _result.field14.Set(field);
      }
      if (field15.HasValue)
      {
        global::Improbable.Collections.Map<long, string> field;
        field = field15.Value.DeepCopy();
        _result.field15.Set(field);
      }
      if (field16.HasValue)
      {
        global::Improbable.Collections.Map<global::Improbable.EntityId, string> field;
        field = field16.Value.DeepCopy();
        _result.field16.Set(field);
      }
      if (field17.HasValue)
      {
        global::Improbable.Collections.Map<global::Improbable.Gdk.Tests.SomeType, string> field;
        field = field17.Value.DeepCopy();
        _result.field17.Set(field);
      }
      return _result;
    }

    public global::Improbable.Worker.IComponentData<ExhaustiveMapKey> ToInitialData()
    {
      return new Data(new global::Improbable.Gdk.Tests.ExhaustiveMapKeyData(
          field2.Value,
          field4.Value,
          field5.Value,
          field6.Value,
          field7.Value,
          field8.Value,
          field9.Value,
          field10.Value,
          field11.Value,
          field12.Value,
          field13.Value,
          field14.Value,
          field15.Value,
          field16.Value,
          field17.Value));
    }

    public void ApplyTo(global::Improbable.Worker.IComponentData<ExhaustiveMapKey> _data)
    {
      var _concrete = _data.Get();
      if (field2.HasValue)
      {
        _concrete.Value.field2 = field2.Value;
      }
      if (field4.HasValue)
      {
        _concrete.Value.field4 = field4.Value;
      }
      if (field5.HasValue)
      {
        _concrete.Value.field5 = field5.Value;
      }
      if (field6.HasValue)
      {
        _concrete.Value.field6 = field6.Value;
      }
      if (field7.HasValue)
      {
        _concrete.Value.field7 = field7.Value;
      }
      if (field8.HasValue)
      {
        _concrete.Value.field8 = field8.Value;
      }
      if (field9.HasValue)
      {
        _concrete.Value.field9 = field9.Value;
      }
      if (field10.HasValue)
      {
        _concrete.Value.field10 = field10.Value;
      }
      if (field11.HasValue)
      {
        _concrete.Value.field11 = field11.Value;
      }
      if (field12.HasValue)
      {
        _concrete.Value.field12 = field12.Value;
      }
      if (field13.HasValue)
      {
        _concrete.Value.field13 = field13.Value;
      }
      if (field14.HasValue)
      {
        _concrete.Value.field14 = field14.Value;
      }
      if (field15.HasValue)
      {
        _concrete.Value.field15 = field15.Value;
      }
      if (field16.HasValue)
      {
        _concrete.Value.field16 = field16.Value;
      }
      if (field17.HasValue)
      {
        _concrete.Value.field17 = field17.Value;
      }
    }
  }

  public partial class Commands
  {
  }

  // Implementation details below here.
  //----------------------------------------------------------------

  public global::Improbable.Worker.Internal.ComponentProtocol.ComponentVtable Vtable {
    get {
      global::Improbable.Worker.Internal.ComponentProtocol.ComponentVtable vtable;
      vtable.ComponentId = ComponentId;
      vtable.Free = global::System.Runtime.InteropServices.Marshal
          .GetFunctionPointerForDelegate(global::Improbable.Worker.Internal.ClientHandles.ClientFree);
      vtable.Copy = global::System.Runtime.InteropServices.Marshal
          .GetFunctionPointerForDelegate(global::Improbable.Worker.Internal.ClientHandles.ClientCopy);
      vtable.Deserialize = global::System.Runtime.InteropServices.Marshal
          .GetFunctionPointerForDelegate(clientDeserialize);
      vtable.Serialize = global::System.Runtime.InteropServices.Marshal
          .GetFunctionPointerForDelegate(clientSerialize);
      return vtable;
    }
  }

  public void InvokeHandler(global::Improbable.Worker.Dynamic.Handler handler)
  {
    handler.Accept<ExhaustiveMapKey>(this);
  }

  private static unsafe readonly global::Improbable.Worker.Internal.ComponentProtocol.ClientDeserialize
      clientDeserialize = ClientDeserialize;
  private static unsafe readonly global::Improbable.Worker.Internal.ComponentProtocol.ClientSerialize
      clientSerialize = ClientSerialize;

  [global::Improbable.Worker.Internal.MonoPInvokeCallback(typeof(global::Improbable.Worker.Internal.ComponentProtocol.ClientDeserialize))]
  private static unsafe global::System.Byte
  ClientDeserialize(global::System.UInt32 componentId,
                    global::System.Byte handleType,
                    global::Improbable.Worker.Internal.Pbio.Object* root,
                    global::Improbable.Worker.Internal.ComponentProtocol.ClientHandle** handleOut)
  {
    *handleOut = null;
    try
    {
      *handleOut = global::Improbable.Worker.Internal.ClientHandles.HandleAlloc();
      if (handleType == (byte) global::Improbable.Worker.Internal.ComponentProtocol.ClientHandleType.Update) {
        var data = new Update();
        var fieldsToClear = new global::System.Collections.Generic.HashSet<uint>();
        var fieldsToClearCount = global::Improbable.Worker.Internal.Pbio.GetUint32Count(root, /* fields to clear */ 1);
        for (uint i = 0; i < fieldsToClearCount; ++i)
        {
           fieldsToClear.Add(global::Improbable.Worker.Internal.Pbio.IndexUint32(root, /* fields to clear */ 1, i));
        }
        var stateObject = global::Improbable.Worker.Internal.Pbio.GetObject(
            global::Improbable.Worker.Internal.Pbio.GetObject(root, /* entity_state */ 2), 197719);
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 2) > 0 || fieldsToClear.Contains(2))
        {
          global::Improbable.Collections.Map<float, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 2);
            field = new global::Improbable.Collections.Map<float, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 2, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetFloat(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field2.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 4) > 0 || fieldsToClear.Contains(4))
        {
          global::Improbable.Collections.Map<int, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 4);
            field = new global::Improbable.Collections.Map<int, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 4, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetInt32(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field4.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 5) > 0 || fieldsToClear.Contains(5))
        {
          global::Improbable.Collections.Map<long, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 5);
            field = new global::Improbable.Collections.Map<long, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 5, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetInt64(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field5.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 6) > 0 || fieldsToClear.Contains(6))
        {
          global::Improbable.Collections.Map<double, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 6);
            field = new global::Improbable.Collections.Map<double, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 6, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetDouble(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field6.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 7) > 0 || fieldsToClear.Contains(7))
        {
          global::Improbable.Collections.Map<string, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 7);
            field = new global::Improbable.Collections.Map<string, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 7, _i);
              field.Add(global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 1), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 1)).BackingArray), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field7.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 8) > 0 || fieldsToClear.Contains(8))
        {
          global::Improbable.Collections.Map<uint, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 8);
            field = new global::Improbable.Collections.Map<uint, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 8, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetUint32(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field8.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 9) > 0 || fieldsToClear.Contains(9))
        {
          global::Improbable.Collections.Map<ulong, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 9);
            field = new global::Improbable.Collections.Map<ulong, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 9, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetUint64(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field9.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 10) > 0 || fieldsToClear.Contains(10))
        {
          global::Improbable.Collections.Map<int, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 10);
            field = new global::Improbable.Collections.Map<int, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 10, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetSint32(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field10.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 11) > 0 || fieldsToClear.Contains(11))
        {
          global::Improbable.Collections.Map<long, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 11);
            field = new global::Improbable.Collections.Map<long, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 11, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetSint64(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field11.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 12) > 0 || fieldsToClear.Contains(12))
        {
          global::Improbable.Collections.Map<uint, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 12);
            field = new global::Improbable.Collections.Map<uint, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 12, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetFixed32(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field12.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 13) > 0 || fieldsToClear.Contains(13))
        {
          global::Improbable.Collections.Map<ulong, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 13);
            field = new global::Improbable.Collections.Map<ulong, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 13, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetFixed64(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field13.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 14) > 0 || fieldsToClear.Contains(14))
        {
          global::Improbable.Collections.Map<int, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 14);
            field = new global::Improbable.Collections.Map<int, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 14, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetSfixed32(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field14.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 15) > 0 || fieldsToClear.Contains(15))
        {
          global::Improbable.Collections.Map<long, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 15);
            field = new global::Improbable.Collections.Map<long, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 15, _i);
              field.Add(global::Improbable.Worker.Internal.Pbio.GetSfixed64(_pair, 1), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field15.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 16) > 0 || fieldsToClear.Contains(16))
        {
          global::Improbable.Collections.Map<global::Improbable.EntityId, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 16);
            field = new global::Improbable.Collections.Map<global::Improbable.EntityId, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 16, _i);
              field.Add(new global::Improbable.EntityId(global::Improbable.Worker.Internal.Pbio.GetInt64(_pair, 1)), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field16.Set(field);
        }
        if (global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 17) > 0 || fieldsToClear.Contains(17))
        {
          global::Improbable.Collections.Map<global::Improbable.Gdk.Tests.SomeType, string> field;
          {
            var _count = global::Improbable.Worker.Internal.Pbio.GetObjectCount(stateObject, 17);
            field = new global::Improbable.Collections.Map<global::Improbable.Gdk.Tests.SomeType, string>((int) _count);
            for (uint _i = 0; _i < _count; ++_i)
            {
              var _pair = global::Improbable.Worker.Internal.Pbio.IndexObject(stateObject, 17, _i);
              field.Add(global::Improbable.Gdk.Tests.SomeType_Internal.Read(global::Improbable.Worker.Internal.Pbio.GetObject(_pair, 1)), global::System.Text.Encoding.UTF8.GetString(global::Improbable.Worker.Bytes.CopyOf(global::Improbable.Worker.Internal.Pbio.GetBytes(_pair, 2), global::Improbable.Worker.Internal.Pbio.GetBytesLength(_pair, 2)).BackingArray));
            }
          }
          data.field17.Set(field);
        }
        **handleOut = global::Improbable.Worker.Internal.ClientHandles.Instance.CreateHandle(data);
      }
      else if (handleType == (byte) global::Improbable.Worker.Internal.ComponentProtocol.ClientHandleType.Snapshot)
      {
        var data = new Data(global::Improbable.Gdk.Tests.ExhaustiveMapKeyData_Internal.Read(
            global::Improbable.Worker.Internal.Pbio.GetObject(root, 197719)));
        **handleOut = global::Improbable.Worker.Internal.ClientHandles.Instance.CreateHandle(data);
      }
      else if (handleType == (byte) global::Improbable.Worker.Internal.ComponentProtocol.ClientHandleType.Request)
      {
        var data = new global::Improbable.Worker.Internal.GenericCommandObject();
        **handleOut = global::Improbable.Worker.Internal.ClientHandles.Instance.CreateHandle(data);
        return 0;
      }
      else if (handleType == (byte) global::Improbable.Worker.Internal.ComponentProtocol.ClientHandleType.Response)
      {
        var data = new global::Improbable.Worker.Internal.GenericCommandObject();
        **handleOut = global::Improbable.Worker.Internal.ClientHandles.Instance.CreateHandle(data);
        return 0;
      }
    }
    catch (global::System.Exception e)
    {
      global::Improbable.Worker.ClientError.LogClientException(e);
      return 0;
    }
    return 1;
  }

  [global::Improbable.Worker.Internal.MonoPInvokeCallback(typeof(global::Improbable.Worker.Internal.ComponentProtocol.ClientSerialize))]
  private static unsafe void
  ClientSerialize(global::System.UInt32 componentId,
                  global::System.Byte handleType,
                  global::Improbable.Worker.Internal.ComponentProtocol.ClientHandle* handle,
                  global::Improbable.Worker.Internal.Pbio.Object* root)
  {
    try
    {
      var _pool = global::Improbable.Worker.Internal.ClientHandles.Instance.GetGcHandlePool(*handle);
      if (handleType == (byte) global::Improbable.Worker.Internal.ComponentProtocol.ClientHandleType.Update) {
        var data = (Update) global::Improbable.Worker.Internal.ClientHandles.Instance.Dereference(*handle);
        var stateObject = global::Improbable.Worker.Internal.Pbio.AddObject(
            global::Improbable.Worker.Internal.Pbio.AddObject(root, /* entity_state */ 2), 197719);
        if (data.field2.HasValue)
        {
          if (data.field2.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 2);
          }
          for (var _node = data.field2.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 2);
            {
              global::Improbable.Worker.Internal.Pbio.AddFloat(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field4.HasValue)
        {
          if (data.field4.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 4);
          }
          for (var _node = data.field4.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 4);
            {
              global::Improbable.Worker.Internal.Pbio.AddInt32(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field5.HasValue)
        {
          if (data.field5.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 5);
          }
          for (var _node = data.field5.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 5);
            {
              global::Improbable.Worker.Internal.Pbio.AddInt64(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field6.HasValue)
        {
          if (data.field6.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 6);
          }
          for (var _node = data.field6.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 6);
            {
              global::Improbable.Worker.Internal.Pbio.AddDouble(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field7.HasValue)
        {
          if (data.field7.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 7);
          }
          for (var _node = data.field7.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 7);
            {
              if (_node.Value.Key != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Key);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 1, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 1, null, 0);
              }
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field8.HasValue)
        {
          if (data.field8.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 8);
          }
          for (var _node = data.field8.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 8);
            {
              global::Improbable.Worker.Internal.Pbio.AddUint32(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field9.HasValue)
        {
          if (data.field9.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 9);
          }
          for (var _node = data.field9.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 9);
            {
              global::Improbable.Worker.Internal.Pbio.AddUint64(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field10.HasValue)
        {
          if (data.field10.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 10);
          }
          for (var _node = data.field10.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 10);
            {
              global::Improbable.Worker.Internal.Pbio.AddSint32(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field11.HasValue)
        {
          if (data.field11.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 11);
          }
          for (var _node = data.field11.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 11);
            {
              global::Improbable.Worker.Internal.Pbio.AddSint64(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field12.HasValue)
        {
          if (data.field12.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 12);
          }
          for (var _node = data.field12.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 12);
            {
              global::Improbable.Worker.Internal.Pbio.AddFixed32(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field13.HasValue)
        {
          if (data.field13.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 13);
          }
          for (var _node = data.field13.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 13);
            {
              global::Improbable.Worker.Internal.Pbio.AddFixed64(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field14.HasValue)
        {
          if (data.field14.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 14);
          }
          for (var _node = data.field14.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 14);
            {
              global::Improbable.Worker.Internal.Pbio.AddSfixed32(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field15.HasValue)
        {
          if (data.field15.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 15);
          }
          for (var _node = data.field15.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 15);
            {
              global::Improbable.Worker.Internal.Pbio.AddSfixed64(_pair, 1, _node.Value.Key);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field16.HasValue)
        {
          if (data.field16.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 16);
          }
          for (var _node = data.field16.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 16);
            {
              global::Improbable.Worker.Internal.Pbio.AddInt64(_pair, 1, _node.Value.Key.Id);
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
        if (data.field17.HasValue)
        {
          if (data.field17.Value.Count == 0)
          {
            global::Improbable.Worker.Internal.Pbio.AddUint32(root, /* fields to clear */ 1, 17);
          }
          for (var _node = data.field17.Value.First; _node != null; _node = _node.Next)
          {
            var _pair = global::Improbable.Worker.Internal.Pbio.AddObject(stateObject, 17);
            {
              global::Improbable.Gdk.Tests.SomeType_Internal.Write(_pool, _node.Value.Key, global::Improbable.Worker.Internal.Pbio.AddObject(_pair, 1));
            }
            {
              if (_node.Value.Value != null)
              {
                var _buffer = global::System.Text.Encoding.UTF8.GetBytes(_node.Value.Value);
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, (byte*) _pool.Pin(_buffer), (uint) _buffer.Length);
              }
              else{
                global::Improbable.Worker.Internal.Pbio.AddBytes(_pair, 2, null, 0);
              }
            }
          }
        }
      }
      else if (handleType == (byte) global::Improbable.Worker.Internal.ComponentProtocol.ClientHandleType.Snapshot) {
        var data = (Data) global::Improbable.Worker.Internal.ClientHandles.Instance.Dereference(*handle);
        global::Improbable.Gdk.Tests.ExhaustiveMapKeyData_Internal.Write(_pool, data.Value, global::Improbable.Worker.Internal.Pbio.AddObject(root, 197719));
      }
      else if (handleType == (byte) global::Improbable.Worker.Internal.ComponentProtocol.ClientHandleType.Request)
      {
        global::Improbable.Worker.Internal.Pbio.AddObject(root, 197719);
      }
      else if (handleType == (byte) global::Improbable.Worker.Internal.ComponentProtocol.ClientHandleType.Response)
      {
        global::Improbable.Worker.Internal.Pbio.AddObject(root, 197719);
      }
    }
    catch (global::System.Exception e)
    {
      global::Improbable.Worker.ClientError.LogClientException(e);
    }
  }
}

}
